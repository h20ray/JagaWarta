(()=>{document.addEventListener("DOMContentLoaded",function(){let s=document.getElementById("load-more-btn"),i=document.getElementById("ajax-post-container");!s||!i||s.addEventListener("click",function(){let e=this,n=parseInt(e.dataset.page),o=parseInt(e.dataset.max),r=e.dataset.archive,c=jagawarta_vars.nonce,d=e.innerHTML;e.classList.add("loading"),e.setAttribute("aria-busy","true"),e.disabled=!0,e.style.width=`${e.offsetWidth}px`,e.innerHTML='<span class="animate-pulse">Loading...</span>';let t=new FormData;t.append("action","jagawarta_load_more"),t.append("nonce",c),t.append("page",n),t.append("archive",r),fetch(jagawarta_vars.ajax_url,{method:"POST",body:t}).then(a=>a.text()).then(a=>{a?(i.insertAdjacentHTML("beforeend",a),e.dataset.page=n+1,n>=o?e.remove():(e.classList.remove("loading"),e.setAttribute("aria-busy","false"),e.innerHTML=d,e.disabled=!1,e.style.width="")):e.remove()}).catch(()=>{e.classList.remove("loading"),e.setAttribute("aria-busy","false"),e.innerHTML=d,e.disabled=!1,e.style.width=""})})});})();
