(()=>{document.addEventListener("DOMContentLoaded",function(){let s=document.getElementById("load-more-btn"),i=document.getElementById("ajax-post-container");!s||!i||s.addEventListener("click",function(){let e=this,n=parseInt(e.dataset.page),d=parseInt(e.dataset.max),r=e.dataset.archive,c=jagawarta_vars.nonce;if(e.classList.contains("loading"))return;let o=e.dataset.initialHtml||e.innerHTML;e.classList.add("loading"),e.setAttribute("aria-busy","true"),e.innerHTML="Loading...",e.disabled=!0;let a=new FormData;a.append("action","jagawarta_load_more"),a.append("nonce",c),a.append("page",n),a.append("archive",r),fetch(jagawarta_vars.ajax_url,{method:"POST",body:a}).then(t=>t.text()).then(t=>{t?(i.insertAdjacentHTML("beforeend",t),e.dataset.page=n+1,n>=d?e.remove():(e.classList.remove("loading"),e.setAttribute("aria-busy","false"),e.innerHTML=o,e.disabled=!1)):e.remove()}).catch(()=>{e.classList.remove("loading"),e.setAttribute("aria-busy","false"),e.innerHTML=o,e.disabled=!1})})});})();
