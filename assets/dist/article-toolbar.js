(()=>{(function(){"use strict";let u=window.matchMedia("(min-width: 768px)"),f=document.querySelector(".prose-article");if(!f)return;let o=document.querySelector("[data-share-modal]"),y=document.querySelector("[data-share-modal-scrim]"),l=document.querySelector("[data-share-modal-close]"),g=document.querySelectorAll("[data-share-trigger]"),a=document.querySelector("[data-share-root]"),q=document.querySelectorAll("[data-share-copy]"),h=document.querySelector("[data-share-message]"),m=a&&a.getAttribute("data-share-title")||document.title,x=a&&a.getAttribute("data-share-text")||m,w=a&&a.getAttribute("data-share-url")||window.location.href,z=typeof navigator<"u"&&!!navigator.share,k=()=>{o&&(o.removeAttribute("hidden"),document.body.style.overflow="hidden",requestAnimationFrame(()=>{o.classList.add("is-open")}),l&&l.focus())},c=()=>{o&&(o.classList.remove("is-open"),setTimeout(()=>{o.setAttribute("hidden",""),document.body.style.overflow=""},200))},p=e=>{h&&(h.textContent=e,setTimeout(()=>{h.textContent=""},2e3))};g.length>0&&g.forEach(e=>{e.addEventListener("click",async n=>{if(n.preventDefault(),z)try{await navigator.share({title:m,text:x,url:w});return}catch(r){if(r&&r.name==="AbortError")return}k()})}),y&&y.addEventListener("click",c),l&&l.addEventListener("click",c),document.addEventListener("keydown",e=>{e.key==="Escape"&&o&&!o.hasAttribute("hidden")&&c()}),q.forEach(e=>{e.addEventListener("click",async n=>{n.preventDefault();let r=e.getAttribute("data-share-copy-url")||w;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(r),p(e.getAttribute("aria-label")||"Link copied"),setTimeout(()=>{c()},800);return}catch{}let t=document.createElement("input");t.type="text",t.value=r,t.setAttribute("aria-hidden","true"),t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.select();try{document.execCommand("copy"),p(e.getAttribute("aria-label")||"Link copied"),setTimeout(()=>{c()},800)}catch{p("Copy not supported in this browser")}finally{document.body.removeChild(t)}})});let i=document.querySelector("[data-font-size-controls]");if(!i||!u.matches)return;let s=["small","default","large"],b="jw-article-font-size-level",A=()=>{let e=sessionStorage.getItem(b);return e&&s.includes(e)?e:"default"},d=e=>{s.includes(e)&&(f.setAttribute("data-font-size-level",e),sessionStorage.setItem(b,e),i.querySelectorAll("[data-font-size-level]").forEach(n=>{let r=n.getAttribute("data-font-size-level");n.setAttribute("aria-pressed",r===e?"true":"false")}))},S=e=>{let n=f.getAttribute("data-font-size-level")||A(),r=s.indexOf(n);if(r===-1){d("default");return}let t=r+e;t<0&&(t=0),t>s.length-1&&(t=s.length-1),d(s[t])};i.querySelectorAll("[data-font-size-level]").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();let r=e.getAttribute("data-font-size-level");r&&d(r)})});let E=i.querySelector('[data-font-size-action="decrease"]'),L=i.querySelector('[data-font-size-action="increase"]');E&&E.addEventListener("click",e=>{e.preventDefault(),S(-1)}),L&&L.addEventListener("click",e=>{e.preventDefault(),S(1)});let v=()=>{if(!u.matches)return;let e=document.querySelector("header figure");if(!e)return;let n=e.getBoundingClientRect(),r=window.scrollY||window.pageYOffset,t=n.bottom+r+24;i.style.top=`${t}px`},T=()=>{u.matches&&requestAnimationFrame(v)};window.addEventListener("scroll",T,{passive:!0}),window.addEventListener("resize",v,{passive:!0}),d(A()),v()})();})();
