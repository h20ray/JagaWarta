(()=>{(function(){"use strict";let u=document.querySelector("#header-nav .jw-nav-menu");if(!u)return;let i=u.querySelectorAll(".menu-item-has-children"),s=null;function t(){if(s){s.classList.remove("is-open");let e=s.querySelector("a");e&&e.setAttribute("aria-expanded","false"),s=null}}function o(e){t(),e.classList.add("is-open");let n=e.querySelector("a");n&&n.setAttribute("aria-expanded","true"),s=e}i.forEach(e=>{let n=e.querySelector("a");n&&(n.setAttribute("aria-expanded","false"),n.setAttribute("aria-haspopup","true"),n.addEventListener("mouseenter",()=>o(e)),e.addEventListener("mouseleave",()=>t()),n.addEventListener("click",()=>t()),n.addEventListener("keydown",r=>{if(r.key==="Enter"||r.key===" ")if(r.preventDefault(),e.classList.contains("is-open"))t();else{o(e);let a=e.querySelector(".jw-mega-menu a");a&&a.focus()}else if(r.key==="Escape")t(),n.focus();else if(r.key==="ArrowDown"){r.preventDefault(),o(e);let a=e.querySelector(".jw-mega-menu a");a&&a.focus()}}))}),document.addEventListener("click",e=>{u.contains(e.target)||t()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s&&t()})})();})();
